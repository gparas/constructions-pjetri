"use client";

import Link from "next/link";
import { useState, useEffect } from "react";

const CookieBanner = () => {
  const [showBanner, setShowBanner] = useState(false);

  useEffect(() => {
    const consent = localStorage.getItem("cookieConsent");
    if (consent) return;
    setShowBanner(true);
  }, []);

  const handleAccept = () => {
    localStorage.setItem("cookieConsent", "true");
    setShowBanner(false);
  };

  if (!showBanner) return null;
  return (
    <div className="fixed-bottom shadow-lg p-5 bg-bg-3 rounded col-12 col-sm-8 col-md-7 col-lg-5 col-xl-4 mb-0 mb-sm-5 mx-auto">
      <div className="row">
        <div className="col-auto">
          <svg
            width={80}
            height={80}
            viewBox="0 0 24 24"
            className="fill-action-1"
          >
            <path d="M 11.683 3.551 C 9.321 3.551 7.1 4.471 5.43 6.141 C 3.76 7.811 2.84 10.032 2.84 12.394 C 2.84 14.754 3.76 16.974 5.432 18.645 C 7.103 20.316 9.323 21.237 11.683 21.237 C 14.045 21.237 16.266 20.317 17.936 18.647 C 19.606 16.976 20.526 14.756 20.526 12.394 C 20.526 12.074 20.509 11.751 20.474 11.434 C 20.464 11.34 20.395 11.263 20.303 11.243 C 19.255 11.021 18.388 10.258 18.033 9.248 C 17.646 9.418 17.235 9.506 16.809 9.509 C 16.802 9.509 16.795 9.509 16.787 9.509 C 15.972 9.509 15.202 9.192 14.618 8.615 C 14.029 8.033 13.703 7.259 13.7 6.435 C 13.699 6.203 13.723 5.972 13.774 5.747 C 13.778 5.727 13.769 5.709 13.75 5.7 C 12.896 5.312 12.272 4.57 12.037 3.665 C 12.02 3.6 11.967 3.555 11.903 3.554 C 11.83 3.552 11.756 3.551 11.683 3.551 Z M 11.683 22.077 C 10.377 22.077 9.109 21.82 7.915 21.315 C 6.763 20.827 5.727 20.129 4.838 19.239 C 3.948 18.35 3.25 17.314 2.762 16.161 C 2.256 14.967 2 13.7 2 12.394 C 2 9.807 3.007 7.376 4.836 5.547 C 6.665 3.718 9.097 2.711 11.683 2.711 C 11.763 2.711 11.844 2.712 11.924 2.714 C 12.359 2.724 12.74 3.029 12.85 3.454 C 13.019 4.103 13.485 4.657 14.098 4.935 C 14.475 5.107 14.684 5.525 14.593 5.93 C 14.557 6.094 14.539 6.262 14.54 6.432 C 14.542 7.03 14.78 7.593 15.209 8.018 C 15.638 8.442 16.205 8.673 16.803 8.669 C 17.121 8.667 17.427 8.6 17.714 8.47 C 17.922 8.376 18.162 8.374 18.372 8.465 C 18.581 8.556 18.744 8.732 18.818 8.948 C 19.072 9.694 19.708 10.259 20.477 10.422 C 20.926 10.517 21.26 10.888 21.31 11.344 C 21.347 11.69 21.366 12.044 21.366 12.394 C 21.366 14.98 20.359 17.412 18.53 19.241 C 16.701 21.07 14.269 22.077 11.683 22.077 Z M 18.956 5.882 C 18.956 6.78 18.228 7.509 17.33 7.509 C 16.431 7.509 15.703 6.78 15.703 5.882 C 15.703 4.984 16.431 4.256 17.33 4.256 C 18.228 4.256 18.956 4.984 18.956 5.882 Z M 13.898 18.836 C 13.898 19.582 13.293 20.186 12.548 20.186 C 11.802 20.186 11.197 19.582 11.197 18.836 C 11.197 18.09 11.802 17.486 12.548 17.486 C 13.293 17.486 13.898 18.09 13.898 18.836 Z M 17.795 13.835 C 17.795 14.63 17.149 15.275 16.354 15.275 C 15.558 15.275 14.913 14.63 14.913 13.835 C 14.913 13.039 15.558 12.394 16.354 12.394 C 17.149 12.394 17.795 13.039 17.795 13.835 Z M 12.548 12.394 C 12.548 12.938 12.106 13.38 11.562 13.38 C 11.017 13.38 10.576 12.938 10.576 12.394 C 10.576 11.849 11.017 11.408 11.562 11.408 C 12.106 11.408 12.548 11.849 12.548 12.394 Z M 8.301 10.7 C 8.301 11.765 7.438 12.628 6.373 12.628 C 5.309 12.628 4.446 11.765 4.446 10.7 C 4.446 9.636 5.309 8.773 6.373 8.773 C 7.438 8.773 8.301 9.636 8.301 10.7 Z M 11.166 6.868 C 11.166 7.413 10.725 7.854 10.18 7.854 C 9.636 7.854 9.194 7.413 9.194 6.868 C 9.194 6.324 9.636 5.882 10.18 5.882 C 10.725 5.882 11.166 6.324 11.166 6.868 Z M 8.529 15.763 C 8.529 16.358 8.047 16.841 7.451 16.841 C 6.856 16.841 6.373 16.358 6.373 15.763 C 6.373 15.168 6.856 14.685 7.451 14.685 C 8.047 14.685 8.529 15.168 8.529 15.763 Z M 22 6.486 C 22 6.945 21.628 7.316 21.17 7.316 C 20.711 7.316 20.34 6.945 20.34 6.486 C 20.34 6.028 20.711 5.656 21.17 5.656 C 21.628 5.656 22 6.028 22 6.486 Z M 15.966 3.155 C 15.966 3.613 15.594 3.985 15.135 3.985 C 14.677 3.985 14.305 3.613 14.305 3.155 C 14.305 2.696 14.677 2.325 15.135 2.325 C 15.594 2.325 15.966 2.696 15.966 3.155 Z M 20.943 2.527 C 20.943 2.861 20.673 3.131 20.34 3.131 C 20.007 3.131 19.736 2.861 19.736 2.527 C 19.736 2.194 20.007 1.924 20.34 1.924 C 20.673 1.924 20.943 2.194 20.943 2.527 Z"></path>
          </svg>
        </div>
        <div className="col">
          <p className="fs-4">
            Χρησιμοποιούμε cookies για να βελτιώσουμε την εμπειρία σας στον
            ιστότοπό μας. Με τη χρήση του ιστότοπου μας, αποδέχεστε τη χρήση των
            cookies.
          </p>
          <div className="d-flex justify-content-end align-items-center gap-4">
            <Link
              className="text-dark-2 text-decoration-underline"
              href="/privacy-policy"
            >
              Mάθετε περισσότερα
            </Link>
            <button onClick={handleAccept} className="btn btn-action-1 btn-sm">
              OK
            </button>
          </div>
        </div>
      </div>
    </div>
  );
};

export default CookieBanner;
